flowchart LR
A[App] == Notification ==> I
subgraph R[Router]
  I([Input]) --> T1[Tag 1]
  I --> T2[Tag 2]
  T1 --> D([Dedupe])
  T2 --> D
  D --> UD[User Delegate]
  DB[(User is subscribed to Tag 1 and Tag 2)] <-.-> D
end
UD == Notification ==> U[User]
